<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 2.0.20">
<title>Schematic</title>
<link rel="stylesheet" href="./../../asciidoctor.css">
</head>
<body class="article">
<div id="header">
<h1>Schematic</h1>
<div id="toc" class="toc">
<div id="toctitle">Table of contents</div>
<ul class="sectlevel1">
<li><a href="#_reference_designators">Reference designators</a></li>
<li><a href="#_connections">Connections</a>
<ul class="sectlevel2">
<li><a href="#_labels">Labels</a></li>
<li><a href="#_supply_connections">Supply connections</a></li>
</ul>
</li>
<li><a href="#_decoupling_capacitors">Decoupling capacitors</a></li>
<li><a href="#_programmer_connector">Programmer connector</a></li>
<li><a href="#_microcontroller">Microcontroller</a>
<ul class="sectlevel2">
<li><a href="#_boot0_pin">BOOT0 pin</a></li>
<li><a href="#_nreset_pin">nRESET pin</a></li>
</ul>
</li>
<li><a href="#_open_drain_outputs">Open drain outputs</a></li>
<li><a href="#_bulk_capacitors">Bulk capacitors</a></li>
</ul>
</div>
</div>
<div id="content">
<div class="sect1">
<h2 id="_reference_designators">Reference designators</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Reference designators are unique identifiers for each component.
For example U1, R2, D2.
Designators are usually prefixed with a letter or letters, that correspond to component&#8217;s type.
Prefix is followed by a number, so that the letter and number combination is unique on the entire schematic.
Prefixes can be usually specified in component library.</p>
</div>
<div class="paragraph">
<p>Common prefixes:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>U or IC - integrated circuit. For example microcontroller, motor driver or voltage regulator.</p>
</li>
<li>
<p>R - resistor.</p>
</li>
<li>
<p>C - capacitor.</p>
</li>
<li>
<p>D - diode or LED (light emitting diode).</p>
</li>
<li>
<p>LED - light emitting diode.</p>
</li>
<li>
<p>L - inductor.</p>
</li>
<li>
<p>Q - transistor.</p>
</li>
<li>
<p>J or CON - connector.</p>
</li>
<li>
<p>S - switch.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_connections">Connections</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_labels">Labels</h3>
<div class="paragraph">
<p>Use labels on nets instead of drawing long wires between components.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="../images/schematic_net_labels.png" alt="Net labels" width="600">
</div>
</div>
</div>
<div class="sect2">
<h3 id="_supply_connections">Supply connections</h3>
<div class="paragraph">
<p>Avoid connecting all the power supply pins together. Use power supply symbols instead.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="../images/schematic_supply_symbols.png" alt="Supply symbols" width="600">
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_decoupling_capacitors">Decoupling capacitors</h2>
<div class="sectionbody">
<div class="paragraph">
<p>It is recommended to connect a decoupling (bypass) capacitor close to each power input pin.
Common capacitance value is 100 nF.
On a schematic, the capacitors can be connected directly to the power pin.
Or they can be connected together close to the component when the component has multiple decoupling capacitors
and there is not enough room to directly wire them to the component.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="../images/schematic_decoupling_capacitors.png" alt="Net labels" width="600">
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_programmer_connector">Programmer connector</h2>
<div class="sectionbody">
<div class="paragraph">
<p>One place where to find the pinout for programmer connector is in
<a href="https://www.st.com/resource/en/user_manual/dm00555046-stlinkv3mods-and-stlinkv3mini-mini-debuggersprogrammers-for-stm32-stmicroelectronics.pdf">STLINK-V3MINI user manual</a>
under <em>9.1.3 STDC14 for STLINK-V3MINI (STM32 JTAG/SWD and VCP)</em>.</p>
</div>
<div class="paragraph">
<p>On the schematic the connections should look similar to the image below:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="../images/schematic_programmer_connector_arm10.png" alt="Programmer connector" width="400">
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_microcontroller">Microcontroller</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_boot0_pin">BOOT0 pin</h3>
<div class="paragraph">
<p>BOOT0 pin can be left unused or used for some other function if nSWBOOT0 is set to 1 in FLASH_OPTR registry.
If nSWBOOT0 is set to 0, then pulldown resitor should be connected to BOOT0 pin.
For more information see Boot configuration section on <a href="firmware.html">Firmware</a> page.</p>
</div>
</div>
<div class="sect2">
<h3 id="_nreset_pin">nRESET pin</h3>
<div class="paragraph">
<p>nRESET pin has an internal pullup.
It is recommended to connect 100 nF decoupling capacitor to nRESET pin.</p>
</div>
<div class="paragraph">
<p>It is possible to connect a switch between nRESET pin and ground to reset the microcontroller manually,
but manual reset is usually not needed and can be done by disconnecting the power.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_open_drain_outputs">Open drain outputs</h2>
<div class="sectionbody">
<div class="paragraph">
<p>nFAULT pin on DRV8243 is an open drain output.</p>
</div>
<div class="paragraph">
<p>Examples on how to use open drain outputs can be found in this
<a href="https://www.falstad.com/circuit/circuitjs.html?ctz=CQAgjCAMB0l3BWcMBMcUHYMGZIA4UA2ATmIxAUgosgCgAzEXAFnGdewRTY+7GiQxIKWgHcmXcCjwS+YPrTAZu7GVVUgAtNm5VySQVCgCQAGQCiAERAAHAK4AbB3ZsgAbgHsHAFwCGAcwBTWn9ZcEIqTj5iXVpTJkhWMHYQFARCHiMqel8HAGdA6joAWRANFGYqBHlUyqMUAVoAJzLmGTAajTajZgw4RUIVbvVu7u4AE0Ccx29NB0Dx8CzjODBaACNwBFYUFTAkTmIoMTCOofaaugAPcKQMCGwyEAxWJNYAeRtAgDsAHTzxk1fABLP55Dx2bz2bx5f6gvLAyb-ADGHgAtjYPN8ft5aDcwIRWMQdnhsCAnm8QAAFJqBPKwvKmAD0AAl-t4POyPP5-PM8WUntgIAhiDJsK82CAAMJY7HI7yg-z-CyWfnMYgQTAZQYZTBHSkAJUCvnGiv+EKhkP+CP831yDASO2UYUw3B04BMQhEoSiqTwYskOiodHiLFSzrSuudwZAOXyhUEJ19FRGMhTxxa5TqGiUGSoYHgdCU53AGAyOZSemohmDJnekOhIBtdoctkczlcnh8AWC4mTdWT6XAtCAA">Falstad simulation</a></p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_bulk_capacitors">Bulk capacitors</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Capacitors can be used to avoid voltage dropping too much during fast current consumption increases.
Electrolytic or ceramic capacitors or combination of both can be used.
Bulk capacitors should be connected between motor driver power input and ground.</p>
</div>
</div>
</div>
</div>
</body>
</html>